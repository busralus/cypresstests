config:
  target: 'http://apilayer.net/api/validate?access_key=11ea658f51dfe75c4049f9ad0d2e92be&number=14158586273'
  phases:
    - duration: 1
      arrivalRate: 1
      name: Stress Test
  payload:
    - path: "deneme.csv"
      fields:
        - 'keyword1'
        - 'keyword2'

  plugins:
    ensure:
      thresholds:
        - http.response_time.p95: 350
        - http.response_time.max: 500
      conditions:
        - expression: http.responses == 2
        - expression: http.response_time.max <500 and http.response_time.4xx.p95 <350
scenarios:
  - name: Validate a Phone Number
    flow:
      - get:
          url: "{{target}}get?param1={{keyword1}}" 
      - post:
          url: "{{target}}post?param2={{keyword2}}"  
          json:                     
                 
          headers:                  
            Content-Type: 'application/json'
            User-Agent: "PostmanRuntime/7.45.0" 
            access_key: '11ea658f51dfe75c4049f9ad0d2e92be'  
          capture:   
            - json: '$'             
              as: 'full_body'
      - log: 'response_body: {{full_body}}'
      - log: 'İlk değer: {{keyword1}}'
      - log: 'İkinciDeğer: {{keyword2}}'
      